<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1062 600" width="1062" height="600">
<rect x="50" y="50" width="92" height="40" stroke="#000" fill="#fff"/>
<text x="96" y="75" text-anchor="middle">APIGateway</text>
<line x1="96" y1="100" x2="96" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<rect x="172" y="50" width="99" height="40" fill="#fff" stroke="#000"/>
<text x="221" y="75" text-anchor="middle">AuthService</text>
<line x1="221" y1="100" x2="221" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<rect x="301" y="50" width="99" height="40" stroke="#000" fill="#fff"/>
<text x="350" y="75" text-anchor="middle">UserService</text>
<line x1="350" y1="100" x2="350" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<rect x="430" y="50" width="120" height="40" fill="#fff" stroke="#000"/>
<text x="490" y="75" text-anchor="middle">ProductService</text>
<line x1="490" y1="100" x2="490" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<rect x="580" y="50" width="106" height="40" fill="#fff" stroke="#000"/>
<text x="633" y="75" text-anchor="middle">OrderService</text>
<line x1="633" y1="100" x2="633" y2="500" stroke-dasharray="5,5" stroke="#000"/>
<rect x="716" y="50" width="156" height="40" fill="#fff" stroke="#000"/>
<text x="794" y="75" text-anchor="middle">NotificationService</text>
<line x1="794" y1="100" x2="794" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<rect x="902" y="50" width="80" height="40" stroke="#000" fill="#fff"/>
<text x="942" y="75" text-anchor="middle">self</text>
<line x1="942" y1="100" x2="942" y2="500" stroke="#000" stroke-dasharray="5,5"/>
<line x1="96" y1="120" x2="942" y2="120" stroke="#000"/>
<polygon points="942,120 935,123 935,116" fill="#000"/>
<text x="519" y="115" text-anchor="middle">extractToken</text>
<line x1="96" y1="160" x2="221" y2="160" stroke="#000"/>
<polygon points="221,160 213,163 213,156" fill="#000"/>
<text x="158" y="155" text-anchor="middle">validate</text>
<line x1="96" y1="200" x2="942" y2="200" stroke="#000"/>
<polygon points="942,200 935,203 935,196" fill="#000"/>
<text x="519" y="195" text-anchor="middle">matchRoute</text>
<line x1="96" y1="240" x2="350" y2="240" stroke="#000"/>
<polygon points="350,240 342,243 342,236" fill="#000"/>
<text x="223" y="235" text-anchor="middle">handle</text>
<rect x="116" y="270" width="113" height="25" fill="#ccffcc" stroke="#006600"/>
<text x="126" y="285">return result</text>
<rect x="345" y="240" width="10" height="70" fill="#fff" stroke="#000"/>
<text x="60" y="325">[else]</text>
<line x1="96" y1="330" x2="490" y2="330" stroke="#000"/>
<polygon points="490,330 482,333 482,326" fill="#000"/>
<text x="293" y="325" text-anchor="middle">handle</text>
<rect x="116" y="360" width="113" height="25" fill="#ccffcc" stroke="#006600"/>
<text x="126" y="375">return result</text>
<rect x="485" y="330" width="10" height="70" fill="#fff" stroke="#000"/>
<text x="60" y="415">[else]</text>
<line x1="96" y1="420" x2="633" y2="420" stroke="#000"/>
<polygon points="633,420 625,423 625,416" fill="#000"/>
<text x="364" y="415" text-anchor="middle">handle</text>
<rect x="116" y="450" width="113" height="25" fill="#ccffcc" stroke="#006600"/>
<text x="126" y="465">return result</text>
<rect x="628" y="420" width="10" height="70" fill="#fff" stroke="#000"/>
<rect x="50" y="320" width="962" height="180" stroke="#000" fill="none"/>
<text x="60" y="330">[alt] condition</text>
<line x1="50" y1="405" x2="1012" y2="405" stroke="#000" stroke-dasharray="5,5"/>
<rect x="50" y="230" width="962" height="270" fill="none" stroke="#000"/>
<text x="60" y="240">[alt] condition</text>
<line x1="50" y1="315" x2="1012" y2="315" stroke="#000" stroke-dasharray="5,5"/>
<rect x="937" y="200" width="10" height="290" fill="#fff" stroke="#000"/>
<text x="60" y="505">[else]</text>
<rect x="116" y="500" width="127" height="25" fill="#ffcccc" stroke="#cc0000"/>
<text x="126" y="515">throw AuthError</text>
<rect x="50" y="190" width="962" height="360" stroke="#000" fill="none"/>
<text x="60" y="200">[alt] condition</text>
<line x1="50" y1="495" x2="1012" y2="495" stroke="#000" stroke-dasharray="5,5"/>
<rect x="937" y="120" width="10" height="420" fill="#fff" stroke="#000"/>
<rect x="216" y="160" width="10" height="380" fill="#fff" stroke="#000"/>
</svg>